<template>
<div class="mainCont">
					
					<div class="project-evaluate">
						<ul class="page-title">
							<li class="li-1">迷你项目|产品分析与投资评估</li>
							<li class="li-2"><span>2018-04-09</span><span>10:20</span></li>
							<li class="li-3 clearfix">
								<ul class="performance clearfix">
									
									
									<li style="margin-right:162px;">
										<dl>
											<dt>达到预期目标</dt>
											<dd class="d-2">  <!--评价2分以上状态：
																1、active 改变颜色
																2、切换icon 类名为 icon-pingjia-moren-mian
																-->
												<i class="iconfont icon-pingjia-moren-mian active"></i>
												<i class="iconfont icon-pingjia-moren-mian active"></i>
												<i class="iconfont icon-pingjia-moren-mian active"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
											</dd>
											<dd class="d-3"><u>3</u>分</dd>
										</dl>
									</li>
									<li>
										<dl>
											<dt>项目质量</dt>
											<dd class="d-2 bad"> <!--评价2分以下状态 ：
																	 1、class='bad'  改变笑脸颜色为灰
																	 2、切换icon 类名 为 icon-pingjia-moren-mian1
																		-->
												<i class="iconfont icon-pingjia-moren-mian1 active"></i>
												<i class="iconfont icon-pingjia-moren-mian1 active"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
											</dd>
											<dd class="d-3"><u>2</u>分</dd>
										</dl>
									</li>
									<li style="margin-left:155px;">
										<dl class="last-dl">
											<dt>完成速度</dt>
											<dd class="d-2">
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
											</dd>
											<dd class="d-3"><u>0</u>分</dd>
										</dl>
									</li>
								</ul>
							</li>
						</ul>
					
						<ul class="bookrack">
							<li class="clearfix">
								<dl class="user fl">
									<dt>
										<div>
											<img src="/static/img/pupil/xm.png" alt="" />
										</div>
										
									</dt>
									<dd class="d-1">小小孩</dd>
									<dd class="d-2">一等奖、最佳创意奖、最佳人气奖啊哈哈</dd>
									<dd class="d-3">报告：<i>10</i>份</dd>
									<dd class="d-4">通过率：<i>100</i>%</dd>
								</dl>
								<dl class="write fl">
									<dt>
										<span class="user-grade d-2" data-grade="0"> <!--range ： 0 - 4-->
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												
										</span>
										<span class="s-1">
											<u>0</u>分
										</span>
									</dt>
									<dd>
										<textarea name="" rows="" cols="" placeholder="请输入评价"></textarea>
									</dd>
								</dl>
							</li>
							
							<li class="clearfix">
								<dl class="user fl">
									<dt>
										<div>
											<img src="/static/img/pupil/xm.png" alt="" />
										</div>
										
									</dt>
									<dd class="d-1">小小孩</dd>
									<dd class="d-2">一等奖、最佳创意奖、最佳人气奖啊哈哈</dd>
									<dd class="d-3">报告：<i>10</i>份</dd>
									<dd class="d-4">通过率：<i>100</i>%</dd>
								</dl>
								<dl class="write fl">
									<dt>
										<span class="user-grade d-2" data-grade="0">
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
										</span>
										<span class="s-1">
											<u>0</u>分
										</span>
									</dt>
									<dd>
										<textarea name="" rows="" cols="" placeholder="请输入评价"></textarea>
									</dd>
								</dl>
							</li>
					
					
							<li class="clearfix">
								<dl class="user fl">
									<dt>
										<div>
											<img src="/static/img/pupil/xm.png" alt="" />
										</div>
										
									</dt>
									<dd class="d-1">小小孩</dd>
									<dd class="d-2">一等奖、最佳创意奖、最佳人气奖啊哈哈</dd>
									<dd class="d-3">报告：<i>10</i>份</dd>
									<dd class="d-4">通过率：<i>100</i>%</dd>
								</dl>
								<dl class="write fl">
									<dt>
										<span class="user-grade d-2">
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
										</span>
										<span class="s-1">
											<u>0</u>分
										</span>
									</dt>
									<dd>
										<textarea name="" rows="" cols="" placeholder="请输入评价"></textarea>
									</dd>
								</dl>
							</li>
					
							<li class="clearfix">
								<dl class="user fl">
									<dt>
										<div>
											<img src="/static/img/pupil/xm.png" alt="" />
										</div>
										
									</dt>
									<dd class="d-1">小小孩</dd>
									<dd class="d-2">一等奖、最佳创意奖、最佳人气奖啊哈哈</dd>
									<dd class="d-3">报告：<i>10</i>份</dd>
									<dd class="d-4">通过率：<i>100</i>%</dd>
								</dl>
								<dl class="write fl">
									<dt>
										<span class="user-grade d-2">
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
												<i class="iconfont icon-pingjia-moren"></i>
										</span>
										<span class="s-1">
											<u>0</u>分
										</span>
									</dt>
									<dd>
										<textarea name="" rows="" cols="" placeholder="请输入评价"></textarea>
									</dd>
								</dl>
							</li>
						
						
						
						</ul>
						
						<div class="btn-box">
							
							<button class="grayBtn-o">取消</button>
							<button class="blueBtn disable">提交</button> <!--移除disable 点亮按钮-->
						</div>
					</div>
		
					
				</div><!-- end of mainCont -->
</template>

<script>
export default {
  mounted() {
    setTimeout(() => {
      /*分页*/
      layui.use("laypage", function() {
        var laypage = layui.laypage;

        //执行一个laypage实例
        laypage.render({
          elem: "page", //注意，这里的 test1 是 ID，不用加 # 号
          count: 50, //数据总数，从服务端得到
          theme: "#0099ff",
          layout: ["count", "prev", "page", "next", "limit", ""],
          theme: "#00cccc"
        });
      });
    }, 500);

    /*评分hover、点击效果:
			1.hover 同步显示当前选定分数
			2.点击后 在父元素data-grade 中存储 分数值*/

    var grade = {
      el: {},
      face: {
        defaul: "iconfont icon-pingjia-moren",
        weixiao: "iconfont icon-pingjia-moren-mian active",
        ordinary: "iconfont icon-pingjia-moren-mian1 active"
      },
      getIdx: function(e) {
        /*获取坐标*/
        var who = this;
        var e = e || window.event;
        var target = e.target || e.srcElement;
        var ta = $(target);
        if (!ta.hasClass("iconfont")) return;

        var idx = ta.index() + 1;

        this.forAll({
          el: ta,
          num: idx
        });
        this.followU(ta, idx);
      },
      followData: function(e) {
        /*根据data-grade 绘制样式*/
        var who = this;
        var e = e || window.event;
        var target = e.target || e.srcElement;
        var ta = $(target);

        var dataId = ta.parent().data("grade");

        this.forAll({
          el: ta,
          num: dataId
        });
        this.followU(ta, dataId);
      },
      followU: function(i, idx) {
        /*更新右侧分数*/
        i
          .parent()
          .next()
          .find("u")
          .text(idx);
      },
      forAll: function(data) {
        /*根据参数 绘制所有样式*/
        var who = this;
        data.el
          .parent()
          .find("i")
          .each(function(idx, item) {
            if (idx < data.num) {
              who.write(data.num > 2 ? true : false, item);
            } else {
              who.Default(item);
            }
          });
      },
      write: function(boolean, i) {
        /*根据参数 绘制单一元素指定样式*/
        var i = $(i);
        var parent = i.parent();
        boolean ? parent.removeClass("bad") : parent.addClass("bad");
        i
          .removeClass()
          .addClass(boolean ? this.face.weixiao : this.face.ordinary);
      },
      Default: function(i) {
        /*绘制单一元素默认样式*/
        $(i)
          .removeClass()
          .addClass(this.face.defaul);
      },
      storeData: function() {
        /*根据坐标存储data*/
        var who = this;
        var e = e || window.event;
        var target = e.target || e.srcElement;
        var ta = $(target);
        var idx = ta.index();
        if (!$(target).hasClass("iconfont")) return;

        ta.parent().data("grade", idx + 1);
        alert(
          "选定分数 :" +
            ta.parent().data("grade") +
            " / 在此处 user-grade元素节点 data-grade 中存储分数值"
        );
      },
      init: function(select) {
        this.el.grade = $(select);
        this.el.grade
          .on("mouseover", this.getIdx.bind(this))
          .on("mouseout", this.followData.bind(this))
          .on("click", this.storeData.bind(this));
      }
    };

    grade.init(".user-grade");

    /*左侧导航*/
    $(window).scroll(function() {
      var w = $(window).scrollTop();
      //console.log(w);

      if (w >= 24) {
        $(".menus").css("top", "75px");
      } else {
        $(".menus").css("top", "auto");
      }
    });
  }
};
</script>

<style scoped>
@import url("/static/css/enterprise/enterprise.css");
</style>
